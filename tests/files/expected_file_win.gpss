; Generated by Violet-BP 0.1a

alpha_1	EQU	3  ; order of Erlang distribution

GENERATE_TIMING_1	VARIABLE	(Exponential(1,0,5))

T_IME_1	TABLE	M1,0,30,40

DISTRIB_Fixed_1	VARIABLE	(FN$M_EAN_1)
DISTRIB_Uniform_1	VARIABLE	(Uniform(2,(0.4#FN$M_EAN_1),(1.6#FN$M_EAN_1)))
DISTRIB_Exponential_1 VARIABLE	(Exponential(1,0,FN$M_EAN_1))
DISTRIB_Triangular_1	VARIABLE	(Triangular(3,(0.4#FN$M_EAN_1),(1.6#FN$M_EAN_1),FN$M_EAN_1))
DISTRIB_Erlang_1	VARIABLE	(Gamma(3,0,(FN$M_EAN_1/alpha_1),alpha_1))
; ...

;
; Performers:
;  A => 1
;
; Works:
;  1 => 1, 1001
;  2 => 2, 1002


NODE_NUM_1	FUNCTION	P$COLNUM_1,D2
 1,1/2,1

P_RIORITY_1	FUNCTION	P$COLNUM_1,D2
 1,1/2,1


M_EAN_1	FUNCTION	P$COLNUM_1,D2
   	1,10.0/2,20.0

D_ISTRIBUTION_1 FUNCTION P$COLNUM_1,D2
   	1,0/2,0

A_DVANCE_1	ADVANCE	V$DISTRIB_Fixed_1
	TRANSFER	,R_ELEASE_1


;
; Transfer matrix:
GRID_1	EQU	2
MAXCOLNUM_1 EQU	2

LINE_0_1	FUNCTION	RN1,D3   ; generate
   	0.0,0/1.0,1/1.0,2
LINE_1_1	FUNCTION	RN1,D3   ; 1
   	0.0,0/0.0,1/1.0,2
LINE_2_1	FUNCTION	RN1,D3   ; 2
   	1.0,0/1.0,1/1.0,2


ASSMB_OFF_1	FUNCTION	P$COLNUM_1,D1
   	2,1

A_SSEMBLE_1	ADVANCE	0
    	TRANSFER	,M_OVE_1


GENERATE	V$GENERATE_TIMING_1

ROW_0_1	ASSIGN	COLNUM_1,FN$LINE_0_1
   	TRANSFER	,SERV_1

ROW_1_1	ASSIGN	COLNUM_1,FN$LINE_1_1
   	TRANSFER 	,SERV_1

ROW_2_1	ASSIGN	COLNUM_1,FN$LINE_2_1
   	TRANSFER	,SERV_1

SERV_1	TEST NE	P$COLNUM_1,0,FIN_1
       	TEST G	P$COLNUM_1,MAXCOLNUM_1,S_TART_1

S_PLIT_1	SAVEVALUE	COLNUM_1_1,((P$COLNUM_1-P$COLNUM_1@(MAXCOLNUM_1+1))/(MAXCOLNUM_1+1))
   	SAVEVALUE	COLNUM_2_1,(P$COLNUM_1@(MAXCOLNUM_1+1))
   	SPLIT	1,CHILD_1
   	ASSIGN	COLNUM_1,X$COLNUM_1_1
   	TRANSFER	,S_TART_1
CHILD_1	ASSIGN	COLNUM_1,X$COLNUM_2_1
   	TRANSFER  ,S_TART_1


S_TART_1    PRIORITY	FN$P_RIORITY_1
   	QUEUE	(P$COLNUM_1+1000)
   	QUEUE	P$COLNUM_1
   	SEIZE	FN$NODE_NUM_1
   	DEPART	P$COLNUM_1
   	TRANSFER	FN,D_ISTRIBUTION_1,A_DVANCE_1

R_ELEASE_1	RELEASE	FN$NODE_NUM_1
   	DEPART	(P$COLNUM_1+1000)
   	TEST GE	P$COLNUM_1,GRID_1,M_OVE_1
   	TRANSFER 	FN,ASSMB_OFF_1,A_SSEMBLE_1
M_OVE_1	SAVEVALUE ROOTER_1,(P$COLNUM_1#2)
   	ASSIGN	ROOTER_1,X$ROOTER_1
   	TRANSFER 	P,ROOTER_1,ROW_0_1

FIN_1   	TABULATE 	T_IME_1
   	TERMINATE 1
